{% extends "base.html" %}
{% load static %}
{% load l10n %}
{% block title %}Trabajo {{ object }}{% endblock %}

{% block page-heading %}
<i class="fas fa-map"></i>
<span>Trabajo /</span>
<span class="text-primary">{{ object }}</span>
{% endblock page-heading %}
{% block page-heading-buttons %}
<div class="btn-group d-print-none" role="group" aria-label="Actions">
  <a onclick="window.print();" class="d-sm-inline-block btn btn-sm btn-secondary shadow-sm">
    <i class="fas fa-print fa-sm text-white-50"></i> Imprimir</a>  
  <a href="{{ object.get_delete_url }}" class="d-sm-inline-block btn btn-sm btn-danger shadow-sm">
    <i class="fas fa-trash fa-sm text-white-50"></i> Eliminar</a>
  <a href="{{ object.get_update_url }}" class="d-sm-inline-block btn btn-sm btn-primary shadow-sm">
    <i class="fas fa-pen fa-sm text-white-50"></i> Editar</a>
</div>
{% endblock page-heading-buttons %}

{% block content %}
<!-- Datos del Expediente -->
<!-- <div class="row mb-2">
  <div class="col-lg-3 mb-2">
    <div class="card bg-info text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small text-uppercase">Fecha</div>
            {{ object.fecha }}
          </div>
          <div class="col-auto">
            <i class="fas fa-calendar-check fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 mb-2">
    <div class="card bg-primary text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small text-uppercase">Expediente</div>
            {% if object.expediente %}{{ object.expediente }}{% else %}S/N{% endif %}
          </div>
          <div class="col-auto">
            <i class="fas fa-folder-open fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 mb-2">
    <div class="card bg-warning text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small text-uppercase">Comitente</div>
            {{ object.comitente }}
          </div>
          <div class="col-auto">
            <i class="fas fa-file-signature fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 mb-2">
    <div class="card bg-secondary text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small text-uppercase">Horas</div>
            {{ object.horas_total }}
          </div>
          <div class="col-auto">
            <i class="fas fa-clock fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->
<div class="row mb-2">
  <div class="col-lg-3 col-md-6 mb-2">
    <div class="card border-left-info shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
              Fecha</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ object.fecha }}
            </div>
          </div>
          <div class="col-auto">
            <i class="far fa-calendar-check fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 mb-2">
    <div class="card border-left-primary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
              Expediente</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {% if object.expediente %}{{ object.expediente }}{% else %}S/N{% endif %}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-folder-open fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-8 mb-2">
    <div class="card border-left-warning shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
              Comitente</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ object.comitente }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-file-signature fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-2 col-md-4 mb-2">
    <div class="card border-left-secondary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">
              Horas</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ object.horas_total }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-clock fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <div class="row mb-4">
  <div class="col-xl-3">
    <div class="card border-left-primary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
              # profesionales</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ object.cantidad_de_profesionales }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-users fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-3">
    <div class="card border-left-success shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
              # vehículos</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ object.cantidad_de_vehiculos }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-truck-monster fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-3">
    <div class="card border-left-warning shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
              # instrumentos</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ object.cantidad_de_instrumentos }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-ruler-combined fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-3">
    <div class="card border-left-danger shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
              Costo Total</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              $ {{ object.costo_total }}
            </div>
          </div>
          <div class="col-auto">
            <i class="far fa-dollar-sign fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->

<div class="row mb-2">
  <div class="col-lg-3 col-md-6 mb-2">
    <div class="card bg-info text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small font-weight-bold text-uppercase"># profesionales</div>
            <div class="h5 mb-0 font-weight-bold">{{ object.cantidad_de_profesionales }}</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-users fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 mb-2">
    <div class="card bg-success text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small font-weight-bold text-uppercase"># vehículos</div>
            <div class="h5 mb-0 font-weight-bold">{{ object.cantidad_de_vehiculos }}</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-truck-monster fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 mb-2">
    <div class="card bg-warning text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small font-weight-bold text-uppercase"># instrumentos</div>
            <div class="h5 mb-0 font-weight-bold">{{ object.cantidad_de_instrumentos }}</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-ruler-combined fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-md-6 mb-2">
    <div class="card bg-dark text-white shadow">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-white-50 small font-weight-bold text-uppercase">Costo Total</div>
            <div class="h5 mb-0 font-weight-bold">$ {{ object.costo_total }}</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Datos de Expediente -->
<!-- <div class="row">
  <div class="col">
    <div class="card border-left-primary shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">
          Datos de Expediente</strong>
        </h6>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-sm table-condensed table-hover table-striped">
            <tbody>
              <tr>
                <th>Fecha de cálculo</th>
                <td>{{ object.fecha }}</td>
              </tr>
              <tr>
                <th>Expediente CoPA</th>
                <td>{% if object.expediente %}{{ object.expediente }}{% else %}S/N{% endif %}</td>
              </tr>
              <tr>
                <th>Comitente</th>
                <td>{{ object.comitente }}</td>
              </tr>
              <tr>
                <th>Horas totales ({{ object.cantidad_de_profesionales }}
                  profesional{% if object.cantidad_de_profesionales > 1 %}es{% endif %})</th>
                <td>{{ object.horas_total }} horas</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div> -->

<!-- Porcentajes de cada rubro -->
<!-- <div class="row">
  <div class="col">
    <div class="card border-left-primary shadow mb-4">
      <div class="card-body">
        <h4 class="small font-weight-bold">Proporciones <span class="float-right">100%</span>
        </h4>
        <div class="progress mb-2" style="height: 3em;">
          <div title="Empresa" class="progress-bar bg-primary" role="progressbar"
            style="width: {{ object.proporcion_empresa|safe }}%" aria-valuenow="{{ object.proporcion_empresa|safe }}"
            aria-valuemin="0" aria-valuemax="100">{{ object.proporcion_empresa|safe }}%</div>
          <div title="Actuantes" class="progress-bar bg-info" role="progressbar"
            style="width: {{ object.proporcion_actuantes|safe }}%"
            aria-valuenow="{{ object.proporcion_actuantes|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_actuantes|safe }}%</div>
          <div title="Movilidad" class="progress-bar bg-success" role="progressbar"
            style="width: {{ object.proporcion_movilidad|safe }}%"
            aria-valuenow="{{ object.proporcion_movilidad|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_movilidad|safe }}%</div>
          <div title="Instrumental" class="progress-bar bg-warning" role="progressbar"
            style="width: {{ object.proporcion_instrumental|safe }}%"
            aria-valuenow="{{ object.proporcion_instrumental|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_instrumental|safe }}%</div>
          <div title="Aportes" class="progress-bar bg-danger" role="progressbar"
            style="width: {{ object.proporcion_aportes|safe }}%" aria-valuenow="{{ object.proporcion_aportes|safe }}"
            aria-valuemin="0" aria-valuemax="100">{{ object.proporcion_aportes|safe }}%</div>
          <div title="Específicos" class="progress-bar bg-secondary" role="progressbar"
            style="width: {{ object.proporcion_especificos|safe }}%"
            aria-valuenow="{{ object.proporcion_especificos|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_especificos|safe }}%</div>
        </div>
      </div>
    </div>
  </div>
</div> -->

<!-- Detalles por rubro -->
<div class="row">
  <div class="col">
    <div class="card border-left-primary shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">
          Detalle de costos por rubro</strong>
        </h6>
      </div>
      <div class="card-body">
        <h4 class="small font-weight-bold">Proporciones <span class="float-right">100%</span>
        </h4>
        <div class="progress mb-2" style="height: 30px;">
          <div title="Empresa" class="progress-bar bg-primary" role="progressbar"
            style="width: {{ object.proporcion_empresa|safe }}%" aria-valuenow="{{ object.proporcion_empresa|safe }}"
            aria-valuemin="0" aria-valuemax="100">{{ object.proporcion_empresa|safe }}%</div>
          <div title="Actuantes" class="progress-bar bg-info" role="progressbar"
            style="width: {{ object.proporcion_actuantes|safe }}%"
            aria-valuenow="{{ object.proporcion_actuantes|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_actuantes|safe }}%</div>
          <div title="Movilidad" class="progress-bar bg-success" role="progressbar"
            style="width: {{ object.proporcion_movilidad|safe }}%"
            aria-valuenow="{{ object.proporcion_movilidad|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_movilidad|safe }}%</div>
          <div title="Instrumental" class="progress-bar bg-warning" role="progressbar"
            style="width: {{ object.proporcion_instrumental|safe }}%"
            aria-valuenow="{{ object.proporcion_instrumental|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_instrumental|safe }}%</div>
          <div title="Aportes" class="progress-bar bg-danger" role="progressbar"
            style="width: {{ object.proporcion_aportes|safe }}%" aria-valuenow="{{ object.proporcion_aportes|safe }}"
            aria-valuemin="0" aria-valuemax="100">{{ object.proporcion_aportes|safe }}%</div>
          <div title="Específicos" class="progress-bar bg-secondary" role="progressbar"
            style="width: {{ object.proporcion_especificos|safe }}%"
            aria-valuenow="{{ object.proporcion_especificos|safe }}" aria-valuemin="0" aria-valuemax="100">
            {{ object.proporcion_especificos|safe }}%</div>
        </div>
        <div class="table-responsive">
          <table class="table table-sm table-condensed table-hover">
            <thead>
              <tr>
                <th>Rubro</th>
                <th>Detalle</th>
                <th>Monto</th>
              </tr>
            </thead>
            <tbody>
              <tr class="table-primary">
                <th>Gastos de Empresa</th>
                <td>{{ object.horas_total }} horas</td>
                <td style="text-align:right">$ {{ object.gastos_de_empresa }}</td>
              </tr>
              <tr class="table-info">
                <th>Costo de actuantes</th>
                <td>{{ object.cantidad_de_profesionales }}
                  profesional{% if object.cantidad_de_profesionales > 1 %}es{% endif %} - {{ object.horas_total }} horas
                </td>
                <td style="text-align:right">$ {{ object.costo_actuantes }}</td>
              </tr>
              <tr class="table-success">
                <th>Costo de movilidad</th>
                <td>{{ object.cantidad_de_vehiculos }} vehículo{% if object.cantidad_de_vehiculos > 1 %}s{% endif %} -
                  {{ object.cantidad_de_km }} km</td>
                <td style="text-align:right">$ {{ object.costo_movilidad }}</td>
              </tr>
              <tr class="table-warning">
                <th>Costo de instrumental</th>
                <td>{{ object.cantidad_de_instrumentos }}
                  instrumento{% if object.cantidad_de_instrumentos > 1 %}s{% endif %} -
                  {{ object.cantidad_de_jornadas }} jornada{% if object.cantidad_de_instrumentos > 1 %}s{% endif %}</td>
                <td style="text-align:right">$ {{ object.costo_instrumental }}</td>
              </tr>
              <tr class="table-danger">
                <th>Aportes</th>
                <td>CoPA + Caja</td>
                <td style="text-align:right">$ {{ object.aportes }}</td>
              </tr>
              <tr class="table-secondary">
                <th>Demás gastos específicos</th>
                <td></td>
                <td style="text-align:right">$ {{ object.gastos_especificos }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Detalle de Gastos Específicos -->
<div class="row">
  <div class="col">
    <div class="card border-left-primary shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">
          Detalle de Gastos Específicos</strong>
        </h6>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-sm table-condensed table-hover table-striped">
            <tbody>
              {% if object.partidas %}
              <tr>
                <th>Sellado Fiscal</th>
                <td>{{ object.partidas }} partida{% if object.partidas > 1 %}s{% endif %} -
                  {{ object.lotes_finales }} lote{% if object.partidas > 1 %}s{% endif %}</td>
                <td style="text-align:right">$ {{ object.sellado_fiscal }}</td>
              </tr>
              <tr>
                <th>Informe{% if object.partidas > 1 %}s{% endif %} Catastral{% if object.partidas > 1 %}es{% endif %}
                </th>
                <td>{{ object.partidas }} partida{% if object.partidas > 1 %}s{% endif %}</td>
                <td style="text-align:right">$ {{ object.informe_catastral }}</td>
              </tr>
              {% endif %}
              {% if object.escrituras %}
              <tr>
                <th>Escrituras</th>
                <td></td>
                <td style="text-align:right">$ {{ object.escrituras }}</td>
              </tr>
              {% endif %}
              {% if object.visados %}
              <tr>
                <th>Visados</th>
                <td></td>
                <td style="text-align:right">$ {{ object.visados }}</td>
              </tr>
              {% endif %}
              {% if object.ayudante %}
              <tr>
                <th>Ayudante</th>
                <td></td>
                <td style="text-align:right">$ {{ object.ayudante }}</td>
              </tr>
              {% endif %}
              {% if object.viaticos %}
              <tr>
                <th>Viáticos</th>
                <td></td>
                <td style="text-align:right">$ {{ object.viaticos }}</td>
              </tr>
              {% endif %}
              {% if object.mojones %}
              <tr>
                <th>Mojones / estacas / cintas peligro</th>
                <td></td>
                <td style="text-align:right">$ {{ object.mojones }}</td>
              </tr>
              {% endif %}
              {% if object.alquiler_instrumentos %}
              <tr>
                <th>Alquileres de instrumentos</th>
                <td></td>
                <td style="text-align:right">$ {{ object.alquiler_instrumentos }}</td>
              </tr>
              {% endif %}
              {% if object.seguros_especiales %}
              <tr>
                <th>Seguros especiales / eventuales</th>
                <td></td>
                <td style="text-align:right">$ {{ object.seguros_especiales }}</td>
              </tr>
              {% endif %}
              {% if object.dibujante %}
              <tr>
                <th>Dibujante</th>
                <td></td>
                <td style="text-align:right">$ {{ object.dibujante }}</td>
              </tr>
              {% endif %}
              {% if object.impresiones %}
              <tr>
                <th>Impresiones / ploteos</th>
                <td></td>
                <td style="text-align:right">$ {{ object.impresiones }}</td>
              </tr>
              {% endif %}
              {% if object.gestor %}
              <tr>
                <th>Gestor / Comisionista</th>
                <td></td>
                <td style="text-align:right">$ {{ object.gestor }}</td>
              </tr>
              {% endif %}
              {% if object.ccu %}
              <tr>
                <th>Certificado Catastral Urgente</th>
                <td></td>
                <td style="text-align:right">$ {{ object.ccu }}</td>
              </tr>
              {% endif %}
              {% if object.estudio_titulos %}
              <tr>
                <th>Estudio de Títulos</th>
                <td></td>
                <td style="text-align:right">$ {{ object.estudio_titulos }}</td>
              </tr>
              {% endif %}
              {% if object.georreferenciacion %}
              <tr>
                <th>Georreferenciación / Vinculación POSGAR2007</th>
                <td></td>
                <td style="text-align:right">$ {{ object.georreferenciacion }}</td>
              </tr>
              {% endif %}
              {% if object.citaciones %}
              <tr>
                <th>Citaciones / notificaciones certificadas</th>
                <td></td>
                <td style="text-align:right">$ {{ object.citaciones }}</td>
              </tr>
              {% endif %}
              {% if object.otros_gastos %}
              <tr>
                <th>Otros gastos sin categorizar</th>
                <td></td>
                <td style="text-align:right">$ {{ object.otros_gastos }}</td>
              </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}